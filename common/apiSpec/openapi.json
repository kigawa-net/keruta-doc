{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Repository Script","description":"Repository setup script API"},{"name":"Agent","description":"Agent management API"},{"name":"Document","description":"Document management API"},{"name":"Repository","description":"Git repository management API"},{"name":"Authentication","description":"Authentication API (Disabled)"},{"name":"Task","description":"Task management API"}],"paths":{"/api/v1/tasks/{id}/status":{"put":{"tags":["Task"],"summary":"Update task status","description":"Updates the status of a specific task","operationId":"updateTaskStatus","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TaskResponse"}}}}}}},"/api/v1/tasks/{id}/script":{"get":{"tags":["Task"],"summary":"Get task script","description":"Retrieves the script for a specific task","operationId":"getTaskScript","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ScriptResponse"}}}}}},"put":{"tags":["Task"],"summary":"Update task script","description":"Updates the script for a specific task","operationId":"updateTaskScript","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScriptRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ScriptResponse"}}}}}}},"/api/v1/tasks/{id}/kubernetes-manifest":{"put":{"tags":["Task"],"summary":"Set Kubernetes manifest","description":"Sets the Kubernetes manifest for a specific task","operationId":"setKubernetesManifest","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TaskResponse"}}}}}}},"/api/v1/repositories/{id}":{"get":{"tags":["Repository"],"summary":"Get repository by ID","description":"Retrieves a specific Git repository by its ID","operationId":"getRepositoryById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Repository"}}}}}},"put":{"tags":["Repository"],"summary":"Update repository","description":"Updates an existing Git repository","operationId":"updateRepository","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Repository"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Repository"}}}}}},"delete":{"tags":["Repository"],"summary":"Delete repository","description":"Deletes a Git repository by its ID","operationId":"deleteRepository","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/v1/documents/{id}":{"get":{"tags":["Document"],"summary":"Get document by ID","description":"Retrieves a specific document by its ID","operationId":"getDocumentById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Document"}}}}}},"put":{"tags":["Document"],"summary":"Update document","description":"Updates an existing document","operationId":"updateDocument","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Document"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Document"}}}}}},"delete":{"tags":["Document"],"summary":"Delete document","description":"Deletes a document by its ID","operationId":"deleteDocument","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/v1/agents/{id}":{"get":{"tags":["Agent"],"summary":"Get agent by ID","description":"Retrieves a specific agent by its ID","operationId":"getAgentById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Agent"}}}}}},"put":{"tags":["Agent"],"summary":"Update agent","description":"Updates an existing agent","operationId":"updateAgent","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Agent"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Agent"}}}}}},"delete":{"tags":["Agent"],"summary":"Delete agent","description":"Deletes an agent from the system","operationId":"deleteAgent","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/v1/tasks":{"get":{"tags":["Task"],"summary":"Get all tasks","description":"Retrieves all tasks in the system","operationId":"getAllTasks","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskResponse"}}}}}}},"post":{"tags":["Task"],"summary":"Create a new task","description":"Creates a new task in the system","operationId":"createTask","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTaskRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TaskResponse"}}}}}}},"/api/v1/tasks/{id}/logs/stream":{"post":{"tags":["Task"],"summary":"Stream log update","description":"Sends a log update to all connected WebSocket clients for this task","operationId":"streamLogUpdate","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"source","in":"query","required":false,"schema":{"type":"string"}},{"name":"level","in":"query","required":false,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/v1/repositories":{"get":{"tags":["Repository"],"summary":"Get all repositories","description":"Retrieves a list of all Git repositories","operationId":"getAllRepositories","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Repository"}}}}}}},"post":{"tags":["Repository"],"summary":"Create a repository","description":"Creates a new Git repository","operationId":"createRepository","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Repository"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Repository"}}}}}}},"/api/v1/documents":{"get":{"tags":["Document"],"summary":"Get all documents","description":"Retrieves a list of all documents","operationId":"getAllDocuments","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Document"}}}}}}},"post":{"tags":["Document"],"summary":"Create a document","description":"Creates a new document","operationId":"createDocument","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Document"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Document"}}}}}}},"/api/v1/auth/refresh":{"post":{"tags":["Authentication"],"summary":"Refresh token (Disabled)","description":"Authentication has been disabled, returns dummy tokens","operationId":"refresh","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["Authentication"],"summary":"Login (Disabled)","description":"Authentication has been disabled, returns dummy tokens","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}}}}},"/api/v1/agents":{"get":{"tags":["Agent"],"summary":"Get all agents","description":"Retrieves all agents in the system","operationId":"getAllAgents","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Agent"}}}}}}},"post":{"tags":["Agent"],"summary":"Create agent","description":"Creates a new agent in the system","operationId":"createAgent","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Agent"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Agent"}}}}}}},"/api/v1/agents/{id}/unassign":{"post":{"tags":["Agent"],"summary":"Unassign task from agent","description":"Unassigns the current task from a specific agent","operationId":"unassignTaskFromAgent","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Agent"}}}}}}},"/api/v1/agents/{id}/assign":{"post":{"tags":["Agent"],"summary":"Assign task to agent","description":"Assigns a task to a specific agent","operationId":"assignTaskToAgent","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Agent"}}}}}}},"/api/v1/agents/{id}/status":{"patch":{"tags":["Agent"],"summary":"Update agent status","description":"Updates the status of a specific agent","operationId":"updateAgentStatus","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Agent"}}}}}}},"/welcome":{"get":{"tags":["root-controller"],"operationId":"welcome","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/v1/tasks/{id}":{"get":{"tags":["Task"],"summary":"Get task by ID","description":"Retrieves a specific task by its ID","operationId":"getTaskById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TaskResponse"}}}}}},"delete":{"tags":["Task"],"summary":"Delete task","description":"Deletes a specific task","operationId":"deleteTask","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/v1/tasks/{id}/logs":{"get":{"tags":["Task"],"summary":"Get task logs","description":"Retrieves the logs of a specific task. For real-time log streaming, use the WebSocket endpoint at /ws/tasks/{id}","operationId":"getTaskLogs","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/v1/tasks/status/{status}":{"get":{"tags":["Task"],"summary":"Get tasks by status","description":"Retrieves all tasks with a specific status","operationId":"getTasksByStatus","parameters":[{"name":"status","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskResponse"}}}}}}}},"/api/v1/repositories/{id}/validate":{"get":{"tags":["Repository"],"summary":"Validate repository URL","description":"Validates if a Git repository URL is valid and accessible","operationId":"validateRepositoryUrl","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"boolean"}}}}}}}},"/api/v1/repositories/{id}/script":{"get":{"tags":["Repository Script"],"summary":"Get repository setup script","description":"Retrieves the setup script for a repository","operationId":"getRepositoryScript","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/v1/health":{"get":{"tags":["health-controller"],"operationId":"health","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/v1/documents/search":{"get":{"tags":["Document"],"summary":"Search documents","description":"Searches for documents based on query parameters","operationId":"searchDocuments","parameters":[{"name":"title","in":"query","required":false,"schema":{"type":"string"}},{"name":"tag","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Document"}}}}}}}},"/api/v1/agents/status/{status}":{"get":{"tags":["Agent"],"summary":"Get agents by status","description":"Retrieves all agents with the specified status","operationId":"getAgentsByStatus","parameters":[{"name":"status","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Agent"}}}}}}}},"/api/v1/agents/language/{language}":{"get":{"tags":["Agent"],"summary":"Get agents by language","description":"Retrieves all agents that support the specified language","operationId":"getAgentsByLanguage","parameters":[{"name":"language","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Agent"}}}}}}}},"/api/v1/agents/best/language/{language}":{"get":{"tags":["Agent"],"summary":"Find best agent for language","description":"Finds the best available agent for a specific language","operationId":"findBestAgentForLanguage","parameters":[{"name":"language","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Agent"}}}}}}},"/api/v1/agents/available/language/{language}":{"get":{"tags":["Agent"],"summary":"Get available agents by language","description":"Retrieves all available agents that support the specified language","operationId":"getAvailableAgentsByLanguage","parameters":[{"name":"language","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Agent"}}}}}}}},"/":{"get":{"tags":["root-controller"],"operationId":"root","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"Document":{"required":["content","createdAt","tags","title","updatedAt"],"type":"object","properties":{"id":{"type":"string"},"title":{"type":"string"},"content":{"type":"string"},"tags":{"type":"array","items":{"type":"string"}},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"ResourcesDto":{"required":["cpu","memory"],"type":"object","properties":{"cpu":{"type":"string"},"memory":{"type":"string"}}},"TaskResponse":{"required":["additionalEnv","createdAt","documents","id","namespace","priority","status","title","updatedAt"],"type":"object","properties":{"id":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"priority":{"type":"integer","format":"int32"},"status":{"type":"string"},"documents":{"type":"array","items":{"$ref":"#/components/schemas/Document"}},"image":{"type":"string"},"namespace":{"type":"string"},"podName":{"type":"string"},"resources":{"$ref":"#/components/schemas/ResourcesDto"},"additionalEnv":{"type":"object","additionalProperties":{"type":"string"}},"kubernetesManifest":{"type":"string"},"logs":{"type":"string"},"parentId":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"ScriptRequest":{"required":["cleanupScript","executeScript","installScript"],"type":"object","properties":{"installScript":{"type":"string"},"executeScript":{"type":"string"},"cleanupScript":{"type":"string"}}},"ScriptContent":{"required":["cleanupScript","executeScript","installScript"],"type":"object","properties":{"installScript":{"type":"string"},"executeScript":{"type":"string"},"cleanupScript":{"type":"string"}}},"ScriptResponse":{"required":["createdAt","environment","script","taskId","updatedAt"],"type":"object","properties":{"taskId":{"type":"string"},"script":{"$ref":"#/components/schemas/ScriptContent"},"environment":{"type":"object","additionalProperties":{"type":"string"}},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"Repository":{"required":["createdAt","description","isValid","name","pvcAccessMode","pvcStorageClass","pvcStorageSize","setupScript","updatedAt","url"],"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"url":{"type":"string"},"description":{"type":"string"},"isValid":{"type":"boolean"},"setupScript":{"type":"string"},"pvcStorageSize":{"type":"string"},"pvcAccessMode":{"type":"string"},"pvcStorageClass":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"Agent":{"required":["createdAt","executeCommand","installCommand","languages","name","status","updatedAt"],"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"languages":{"type":"array","items":{"type":"string"}},"status":{"type":"string","enum":["AVAILABLE","BUSY","OFFLINE"]},"currentTaskId":{"type":"string"},"installCommand":{"type":"string"},"executeCommand":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"CreateTaskRequest":{"required":["additionalEnv","documents","namespace","priority","status","title"],"type":"object","properties":{"title":{"type":"string"},"description":{"type":"string"},"priority":{"type":"integer","format":"int32"},"status":{"type":"string"},"documents":{"type":"array","items":{"$ref":"#/components/schemas/Document"}},"image":{"type":"string"},"namespace":{"type":"string"},"additionalEnv":{"type":"object","additionalProperties":{"type":"string"}},"repositoryId":{"type":"string"},"parentId":{"type":"string"}}},"RefreshTokenRequest":{"required":["refreshToken"],"type":"object","properties":{"refreshToken":{"type":"string"}}},"TokenResponse":{"required":["accessToken","refreshToken","tokenType"],"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"tokenType":{"type":"string"}}},"LoginRequest":{"required":["password","username"],"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}}}}}