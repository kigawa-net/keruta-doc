# API共通仕様

このドキュメントでは、kerutaプロジェクトにおける各サブシステムで共通して利用されるAPI設計方針や認証・認可、エラーハンドリング、レスポンス形式、バージョニング等の共通仕様についてまとめます。

## API設計方針
- RESTful設計を基本とする。
- リソース指向のエンドポイント命名。

## 認証・認可
- JWTベースの認証を推奨。
- 必要に応じてOAuth2やAPIキーも利用可能。
- すべてのAPIリクエストには認証が必要です。

```http
Authorization: Bearer <access_token>
```

## エラーハンドリング
- エラー時はHTTPステータスコードとともに、以下のJSON形式で返却する。

```json
{
  "error": {
    "code": "エラーコード",
    "message": "エラーメッセージ"
  }
}
```

## 共通レスポンス形式
- 正常時もJSON形式を基本とする。
- ページネーションやメタ情報は`meta`フィールドで返却。

```json
{
  "data": {
    // レスポンスデータ
  },
  "meta": {
    "timestamp": "2024-06-18T10:00:00Z",
    "version": "1.0.0"
  }
}
```

- エラー時:
```json
{
  "error": {
    "code": "ERROR_CODE",
    "message": "エラーメッセージ",
    "details": {}
  },
  "meta": {
    "timestamp": "2024-06-18T10:00:00Z",
    "version": "1.0.0"
  }
}
```

## バージョニング
- URLパスにバージョン番号を含める（例: `/api/v1/resource`）。

## その他共通事項
- タイムゾーンはJST（日本標準時）を基準とする。
- 日時はISO 8601形式（例: `2024-06-01T12:00:00+09:00`）で返却。 